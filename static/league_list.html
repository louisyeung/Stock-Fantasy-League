<!-- HTML Template List of all the Leagues for all players or can be used for a specific user
        Written By: Oz Bejerano
        Tested By: Oz Bejerano
        Debugged By: Oz Bejerano
    -->
<div ng-include="'league_create_league.html'"></div>
<nav class="navbar navbar-light bg-light justify-content-between">
    <a class="navbar-brand">{{navbarHeader}}</a>
    <form class="form-inline">
        <button ng-show="uid > 0" class="btn btn-primary mx-2" ng-click="openCreateLeagueModal()">Create League</button>
        <input class="form-control mr-sm-2" type="search" placeholder="Search Leagues" aria-label="Search" ng-model="LeagueSelect">
    </form>
</nav>
<!--<form ng-if="!leaguesView" class="form-inline">
    <input class="form-control mr-sm-2" type="search" placeholder="Search Leagues" aria-label="Search" ng-model="LeagueSelect.leaguename">
</form>-->
<table class="table table-striped table-hover">
    <thead class="thead-dark">
        <tr>
            <th>League Name</th>
            <th>Description</th>
            <th>Number Of Players</th>
            <th>Start Balance</th>
            <th ng-if="uid>0">Join/View</th>
            <th ng-if="uid>0">Leave/Delete</th>
        </tr>
    </thead>
    <tr ng-repeat="league in leagues| filter: LeagueSelect">
        <a ng-href="#!/league/{{league.lid}}">
            <td><a ng-href="#!/league/{{league.lid}}">{{(league.leaguename | limitTo: 20) + ((league.leaguename != undefined || league.leaguename != null || league.leaguename.length > 20) ? '...': '')}}{{league.industry}}</a></td>
            <td><a ng-href="#!/league/{{league.lid}}">{{(league.description | limitTo: 20) + (league.description.length > 20 ? '...': '')}}</a></td>
            <td><a ng-href="#!/league/{{league.lid}}">{{league.pid.length | number}}</a></td>
            <td><a ng-href="#!/league/{{league.lid}}">{{league.startbal | currency }}</a></td>
            <td ng-if="uid>0 && league.uid.indexOf(uid) == -1"><button class="btn btn-primary" ng-click="joinLeague(league.lid);">Join</button></td>
            <td ng-if="uid>0 && league.uid.indexOf(uid)>=0"><a class="btn btn-success" ng-href="#!/league/{{league.lid}}/player/{{league.pid[league.uid.indexOf(uid)]}}">Buy/Sell Stocks</a></td>
            <td ng-if="uid>0 && league.owneruid == uid"><a class="btn btn-danger" ng-click="deleteLeague(league.lid)">Delete League</a></td>
            <td ng-if="uid>0 && league.owneruid != uid && league.uid.indexOf(uid)>=0"><a class="btn btn-warning" ng-click="leaveLeague(uid,league.pid[league.uid.indexOf(uid)])">Leave League</a></td>
            <td ng-if="uid>0 && league.uid.indexOf(uid) == -1"></td>
            <!--also check if user is logged in -->
        </a>
    </tr>
</table>
<!--

            <ul>
                <ol>{{league.leaguename}}</ol>
                <ol>{{league.description}}</ol>
</ul>
        </a>-->
